<!DOCTYPE html>
<html>
<head>
  <title>MetaMask-like Interface</title>
  <style>
    /* CSS-Styling für das MetaMask-Interface */
    body {
      font-family: Arial, sans-serif;
      background-color: #f3f3f3;
      margin: 0;
      padding: 0;
    }

    .container {
      width: 400px;
      margin: 0 auto;
      padding: 20px;
      background-color: #ffffff;
      border: 1px solid #dddddd;
      border-radius: 5px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    }

    h1 {
      text-align: center;
    }

    .coin {
      margin-top: 20px;
    }

    .coin-name {
      font-size: 24px;
      font-weight: bold;
      color: #333333;
    }

    .coin-price {
      font-size: 18px;
      color: #666666;
    }

    .wallet {
      margin-top: 20px;
    }

    .wallet-address {
      font-size: 16px;
      color: #333333;
      margin-bottom: 5px;
    }

    .secret-phrase {
      font-size: 14px;
      color: #666666;
    }

    .button {
      display: inline-block;
      padding: 10px 20px;
      background-color: #4caf50;
      color: #ffffff;
      text-decoration: none;
      border-radius: 5px;
      cursor: pointer;
    }

    .button:hover {
      background-color: #45a049;
    }

    .transaction-history {
      margin-top: 20px;
    }

    .transaction-history-title {
      font-size: 18px;
      font-weight: bold;
      margin-bottom: 10px;
    }

    .transaction {
      margin-bottom: 5px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>MetaMask-like Interface</h1>

    <div class="wallet-actions">
      <button class="button" onclick="generateWallet()">Create Wallet</button>
    </div>

    <div class="coin">
      <div class="coin-name">RSHC</div>
      <div class="coin-price">$1.31</div>
    </div>

    <div class="wallet">
      <div class="wallet-address">Wallet-Adresse:</div>
      <input type="text" id="addressInput" class="secret-phrase" placeholder="Geben Sie die Wallet-Adresse ein" />
      <div class="secret-phrase">Privater Schlüssel:</div>
      <input type="text" id="privateKeyInput" class="secret-phrase" placeholder="Privater Schlüssel wird generiert" readonly />
      <div class="balance" id="balance"></div>
    </div>

    <div class="actions">
      <h2>Aktionen</h2>
      <div>
        <label for="recipientInput">Empfänger-Adresse:</label>
        <input type="text" id="recipientInput" placeholder="Geben Sie die Empfänger-Wallet-Adresse ein" />
      </div>
      <div>
        <label for="amountInput">Betrag:</label>
        <input type="number" id="amountInput" placeholder="Geben Sie den zu sendenden Betrag ein" />
      </div>
      <button class="button" onclick="sendCoins()">Coins senden</button>
      <button class="button" onclick="receiveCoins()">Coins empfangen</button>
    </div>

    <div class="transaction-history">
      <h2>Transaktionsverlauf</h2>
      <div id="transactionHistory"></div>
    </div>
  </div>

  <script>
    var wallets = {};
    var hasCreatedWallet = false;

    // JavaScript-Code zur Generierung der Wallet-Adresse und des privaten Schlüssels
    function generateWallet() {
      // Überprüfe, ob bereits eine Wallet erstellt wurde
      if (hasCreatedWallet) {
        alert('Es wurde bereits eine Wallet erstellt!');
        return;
      }

      // Überprüfe die IP-Adresse
      var ipAddress = getIPAddress();

      if (ipAddress in wallets) {
        alert('Es wurde bereits eine Wallet mit dieser IP-Adresse erstellt!');
        return;
      }

      // Generiere eine zufällige Wallet-Adresse und einen privaten Schlüssel
      var address = generateRandomAddress();
      var privateKey = generateRandomString(64);

      // Initialisiere den Kontostand mit 100 Coins
      wallets[address] = 100;

      // Aktualisiere die Anzeige der Wallet-Adresse, des privaten Schlüssels und des Kontostands
      document.getElementById('addressInput').value = address;
      document.getElementById('privateKeyInput').value = privateKey;
      document.getElementById('balance').innerText = wallets[address] + ' Coins';

      hasCreatedWallet = true;
    }

    // Funktion zur Abrufung der IP-Adresse des Clients
    function getIPAddress() {
      // Hier kannst du den Code einfügen, um die IP-Adresse des Clients zu erhalten
      // Dies kann serverseitig oder mit einer externen API erfolgen
      // Da dies ein Frontend-Beispiel ist, wird statisch '0.0.0.0' als IP-Adresse zurückgegeben
      return '0.0.0.0';
    }

    // JavaScript-Code zum Senden von Coins
    function sendCoins() {
      var address = document.getElementById('addressInput').value;
      var recipient = document.getElementById('recipientInput').value;
      var amount = document.getElementById('amountInput').value;

      if (address === '' || recipient === '' || amount === '') {
        alert('Bitte füllen Sie alle Felder aus!');
        return;
      }

      if (wallets[address] < amount) {
        alert('Nicht genügend Coins auf der Wallet!');
        return;
      }

      // Verringere den Kontostand der sendenden Wallet
      wallets[address] -= amount;

      // Hier kannst du den Code zum Senden von Coins implementieren
      // Beispiel: Annahme, dass der Sendevorgang erfolgreich ist

      // Erhöhe den Kontostand der empfangenden Wallet
      wallets[recipient] += parseInt(amount);

      var transaction = {
        type: 'Send',
        sender: address,
        recipient: recipient,
        amount: amount
      };

      displayTransaction(transaction);
      updateBalance(address);

      alert(amount + ' Coins wurden erfolgreich an ' + recipient + ' gesendet!');
    }

    // JavaScript-Code zum Empfangen von Coins
    function receiveCoins() {
      var address = generateRandomAddress();
      var amount = document.getElementById('amountInput').value;

      if (amount === '') {
        alert('Bitte geben Sie den zu empfangenden Betrag ein!');
        return;
      }

      // Erhöhe den Kontostand der empfangenden Wallet
      wallets[address] += parseInt(amount);

      var transaction = {
        type: 'Receive',
        sender: '',
        recipient: address,
        amount: amount
      };

      displayTransaction(transaction);
      updateBalance(address);

      alert(amount + ' Coins wurden erfolgreich empfangen! Wallet-Adresse: ' + address);
    }

    // Funktion zum Anzeigen einer Transaktion im Transaktionsverlauf
    function displayTransaction(transaction) {
      var transactionHistory = document.getElementById('transactionHistory');

      var transactionElement = document.createElement('div');
      transactionElement.classList.add('transaction');

      var transactionType = document.createElement('span');
      transactionType.innerHTML = transaction.type + ': ';
      transactionElement.appendChild(transactionType);

      var transactionDetails = document.createElement('span');
      transactionDetails.innerHTML = transaction.amount + ' Coins von ' + transaction.sender + ' an ' + transaction.recipient;
      transactionElement.appendChild(transactionDetails);

      transactionHistory.appendChild(transactionElement);
    }

    // Funktion zum Aktualisieren des Kontostands
    function updateBalance(address) {
      document.getElementById('balance').innerText = wallets[address] + ' Coins';
    }

    // JavaScript-Code zur Generierung einer zufälligen Wallet-Adresse
    function generateRandomAddress() {
      var address = '0x';
      var characters = '0123456789ABCDEF';

      for (var i = 0; i < 30; i++) {
        address += characters.charAt(Math.floor(Math.random() * characters.length));
      }

      return address;
    }

    // JavaScript-Code zur Generierung einer zufälligen Zeichenkette
    function generateRandomString(length) {
      var result = '';
      var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';

      for (var i = 0; i < length; i++) {
        result += characters.charAt(Math.floor(Math.random() * characters.length));
      }

      return result;
    }
  </script>
</body>
</html>
